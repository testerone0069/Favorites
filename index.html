<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homepage</title>
<link rel="icon" type="image/png" href="/Favorites/favicon.png">
<style>
    html, body {
        margin: 0;
        padding: 0;
        background: #000;
        color: white;
        font-family: Arial, sans-serif;
        width: 100%;
        min-height: 100%;
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding-top: 20px;
    }
    .block {
        background: #000;
        margin: 10px;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.7);
        width: 90%;
        max-width: 400px;
        text-align: center;
        position: relative;
    }
    h2 {
        color: #00d1ff;
        margin-bottom: 8px;
    }
    #fact, #quote {
        margin-top: 10px;
        font-size: 14px;
        color: #ccc;
    }
    .refresh-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #111;
        border: 1px solid #444;
        color: #00d1ff;
        padding: 3px 6px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        transition: background 0.3s, color 0.3s;
    }
    .refresh-btn:hover {
        background: #222;
        color: #00ffff;
    }

    /* Gallery Styling */
    #img {
        max-width: 90%;
        height: auto;
        border: 2px solid #444;
        border-radius: 10px;
        margin: 20px 0 15px 0;
    }
    .controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 90%;
        max-width: 500px;
        gap: 10px;
        margin-bottom: 20px;
    }
    button, select {
        padding: 8px 16px;
        background: #111;
        color: #00d1ff;
        border: 1px solid #444;
        border-radius: 5px;
        cursor: pointer;
        flex: 1;
    }
    button:hover, select:hover {
        background: #222;
    }
    select {
        max-width: 150px;
    }
</style>
</head>
<body>

<!-- Info Blocks -->
<div class="block">
    <h2>Random Quote</h2>
    <button class="refresh-btn" onclick="fetchRandomQuote()">↻</button>
    <div id="quote">Loading...</div>
</div>

<div class="block">
    <h2>Random Fact</h2>
    <button class="refresh-btn" onclick="fetchRandomFact()">↻</button>
    <div id="fact">Loading...</div>
</div>

<div class="block">
    <h2>Current Date & Time</h2>
    <div id="dateInfo">Loading...</div>
    <div id="timeInfo">Loading...</div>
</div>

<div class="block">
    <h2>End of Month</h2>
    <div id="countdownMonth">Loading...</div>
</div>

<div class="block">
    <h2>End of Year</h2>
    <div id="countdownYear">Loading...</div>
</div>

<div class="block">
    <h2>API Sources</h2>
    <pre style="background:#111; color:#0f0; padding:10px; border-radius:5px; text-align:left; overflow:auto; font-size:12px;">
https://uselessfacts.jsph.pl/random.json?language=en
https://api.quotable.io/random
    </pre>
</div>

<!-- Image Gallery Section -->
<img id="img" src="" alt="Image will appear here">

<div class="controls">
    <button onclick="showPrevious()">&#8592;</button>
    <select id="category" onchange="resetGallery()">
        <option value="nature">Nature</option>
        <option value="animals">Animals</option>
        <option value="cars">Cars</option>
    </select>
    <button onclick="showNext()">&#8594;</button>
</div>

<script>
/* Info Block Functions */
function pad(n) {
    return n < 10 ? '0' + n : n;
}

function updateDateTime() {
    const now = new Date().toLocaleString("en-US", {timeZone: "Asia/Kolkata"});
    const current = new Date(now);

    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const monthNames = ["January", "February", "March", "April", "May", "June",
                        "July", "August", "September", "October", "November", "December"];

    const dayName = dayNames[current.getDay()];
    const monthName = monthNames[current.getMonth()];
    const day = pad(current.getDate());
    const month = pad(current.getMonth() + 1);
    const year = current.getFullYear();
    const hours = pad(current.getHours());
    const minutes = pad(current.getMinutes());
    const seconds = pad(current.getSeconds());

    document.getElementById("dateInfo").innerText = `${dayName} | ${monthName}`;
    document.getElementById("timeInfo").innerText = `${day}:${month}:${year} | ${hours}:${minutes}:${seconds}`;
}

function getTimeRemaining(targetDate) {
    const now = new Date().toLocaleString("en-US", {timeZone: "Asia/Kolkata"});
    const current = new Date(now);
    const diff = targetDate - current;

    if (diff <= 0) return {days: 0, hours: 0, minutes: 0};

    const totalSeconds = Math.floor(diff / 1000);
    const minutes = Math.floor(totalSeconds / 60) % 60;
    const hours = Math.floor(totalSeconds / (60 * 60)) % 24;
    const days = Math.floor(totalSeconds / (60 * 60 * 24));

    return {days, hours, minutes};
}

function updateCountdowns() {
    const now = new Date().toLocaleString("en-US", {timeZone: "Asia/Kolkata"});
    const current = new Date(now);
    const year = current.getFullYear();

    const endOfYear = new Date(`2025-12-31T23:59:59+05:30`);
    let endOfMonth = new Date(`${year}-07-31T23:59:59+05:30`);

    if (current > endOfMonth) {
        endOfMonth = new Date(`${year + 1}-07-31T23:59:59+05:30`);
    }

    const yearLeft = getTimeRemaining(endOfYear);
    const monthLeft = getTimeRemaining(endOfMonth);

    document.getElementById("countdownYear").innerText = 
        `${yearLeft.days} Days : ${yearLeft.hours} Hours : ${yearLeft.minutes} Minutes left`;

    document.getElementById("countdownMonth").innerText = 
        `${monthLeft.days} Days : ${monthLeft.hours} Hours : ${monthLeft.minutes} Minutes left`;
}

function fetchRandomFact() {
    fetch('https://uselessfacts.jsph.pl/random.json?language=en')
        .then(res => res.json())
        .then(data => {
            document.getElementById('fact').innerText = data.text;
        })
        .catch(() => {
            document.getElementById('fact').innerText = "Failed to load fact.";
        });
}

function fetchRandomQuote() {
    fetch('https://api.quotable.io/random')
        .then(res => res.json())
        .then(data => {
            document.getElementById('quote').innerText = `"${data.content}" — ${data.author}`;
        })
        .catch(() => {
            document.getElementById('quote').innerText = "Failed to load quote.";
        });
}

setInterval(updateDateTime, 1000);
setInterval(updateCountdowns, 1000);
setInterval(fetchRandomFact, 60000);
setInterval(fetchRandomQuote, 60000);

updateDateTime();
updateCountdowns();
fetchRandomFact();
fetchRandomQuote();

/* Gallery Functions */
const imageCounts = {
    nature: 10,
    animals: 8,
    cars: 5
};

let currentIndex = 1;
let currentCategory = 'nature';

function updateImage() {
    const total = imageCounts[currentCategory];
    if (currentIndex < 1) currentIndex = total;
    if (currentIndex > total) currentIndex = 1;

    const imgUrl = `images/${currentCategory}/${currentIndex}.jpg`;

    const img = document.getElementById('img');
    img.src = imgUrl;
    img.alt = `${currentCategory} Image ${currentIndex}`;
}

function showPrevious() {
    currentIndex--;
    updateImage();
}

function showNext() {
    currentIndex++;
    updateImage();
}

function resetGallery() {
    currentCategory = document.getElementById('category').value;
    currentIndex = 1;
    updateImage();
}

window.onload = updateImage;
</script>

</body>
</html>
